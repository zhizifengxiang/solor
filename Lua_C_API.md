# Lua C API编程初探

## 序
由于业务需要学习C中调用Lua函数接口。查看最近的Lua 5.3文档，以及相关博客教程，其中原理机制相对不甚清晰，复杂内容较多。偶然下载到Lua 5.0的手册，里面说明十分详尽，尤其在原理部分，说明十分清晰。虽然相隔十年，5.0-5.3三个子版本原理基本不变，相应添加的函数相对比较简单，因此，目前对于入门来说，5.0版本的手册不失为一把很好的钥匙。

## 综述
在当前的版本（5.0）中，以下函数的声明可在lua.h中找到。其中函数可能以macro形式进行定义。但是所有函数都没有任何副作用，即函数不会影响到调用其的C代码中的变量，除了Lua state变量。Lua state变量记录之前执行的状态，可以认为是一个状态机。

# 1， States
Lua库完全“可重入”，即其不改变C语言中的变量，所有的运算结果和运算状态，都被保存在一个动态分配的结构体中：lua_State。在调用所有Lua库函数时，都需传入指向该结构体的指针。该结构体使用函数lua_open()函数来创建。因此通常调用函数的结构是：
```
lua_State *luaState = lua_open();
// do something
```

>lua_State *lua_open(void)



